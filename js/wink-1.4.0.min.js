define=function(){if(typeof wink=="undefined")wink={};var b=arguments,a=b.length;return(a==1?b[0]:a==2?b[1]:b[2])(wink)};define.amd={vendor:"winktoolkit.org"};define(function(){if(typeof wink=="undefined")wink={};return wink});
define(["../../_kernel/js/kernel"],function(b){b.version="1.4.1";b.api={};b.mm={};b.net={};b.plugins={};b.ui={form:{},layout:{},xy:{},xyz:{}};b.ux={};var a=Array.prototype.slice,c=window;b.byId=function(f){return b.isString(f)?document.getElementById(f):f};b.query=function(f,e){return a.call((e||document).querySelectorAll(f))};var d="en_EN";b.setLocale=function(f){d=f};b.translate=function(f,e){var h=f,i=window.i18n||{};if(b.isSet(e)&&b.isSet(e.i18n))i=e.i18n;var m=i[d];if(b.isUndefined(m))m=i;i=
m[f];b.isUndefined(i)||(h=i);return h};b.isUndefined=function(f){return f===undefined};b.isNull=function(f){return f===null};b.isSet=function(f){return!b.isUndefined(f)&&!b.isNull(f)};b.isCallback=function(f){return!!(f&&f.method)};b.isString=function(f){return typeof f=="string"||f instanceof String};b.isInteger=function(f){return parseInt(f)===f};b.isNumber=function(f){return typeof f=="number"||f instanceof Number};b.isArray=function(f){return typeof f=="array"||f instanceof Array};b.isBoolean=
function(f){return typeof f=="boolean"||f instanceof Boolean};b.isFunction=function(f){return Object.prototype.toString.call(f)==="[object Function]"};b.trim=function(f){return f.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};b.bind=function(f,e){var h=a.call(arguments,2);return function(){var i=h.concat(a.call(arguments,0));return f.apply(e,i)}};b.call=function(f,e){var h=c,i=f.method,m=[];if(b.isSet(f.context))h=f.context;if(arguments.length==2)m=[e];if(b.isSet(f.arguments)){var p=f.arguments;b.isArray(p)||
(p=[f.arguments]);m=m.concat(p)}return h[i].apply(h,m)};b.connect=function(f,e,h){if(!b.isSet(h.context))h.context=c;var i=f[e];if(b.isNull(i)||b.isUndefined(i.cbs)){var m=function(){var l=arguments.callee.target,n=[],j,k=arguments.length;for(j=0;j<k;j++){var o=arguments[j];n=b.isArray(o)?n.concat([o]):n.concat(o)}l&&l.apply(f,n);l=f[e].cbs;for(var q in l)b.isArray(l[q].arguments)?b.call({context:l[q].context,method:l[q].method,arguments:n.concat(l[q].arguments)}):b.call({context:l[q].context,method:l[q].method,
arguments:n.concat([l[q].arguments])})};m.target=i;m.cbs=[];i=f[e]=m}for(var p in i.cbs)if(i.cbs[p].context==h.context&&i.cbs[p].method==h.method)return;i.cbs.push(h)};b.disconnect=function(f,e,h){if(!b.isSet(h.context))h.context=c;f=f[e];if(!b.isUndefined(f.cbs))for(var i in f.cbs)f.cbs[i].context==h.context&&f.cbs[i].method==h.method&&delete f.cbs[i]};b.setTimeout=function(f,e,h){var i=a.call(arguments,3);return setTimeout(function(){f[e].apply(f,i)},h)};b.setInterval=function(f,e,h){var i=a.call(arguments,
3);return setInterval(function(){f[e].apply(f,i)},h)};var g=100;b.getUId=function(){return g+=1};if(b.isUndefined(c._))_=b.bind(b.translate,b);if(b.isUndefined(c.$$))$$=b.bind(b.query,b);if(b.isUndefined(c.$))$=b.bind(b.byId,b);return b});
define(["../../../_base/_base/js/base"],function(b){var a=HTMLElement.prototype,c=b.isUndefined,d=function(l,n){for(var j={x:0,y:0},k=this;k&&k!=l;){j.x+=k.offsetLeft;j.y+=k.offsetTop;if(n){j.x+=b.fx.getTransformPosition(k).x;j.y+=b.fx.getTransformPosition(k).y}k=k.offsetParent}return j},g=function(l,n){return this.getPosition(l,n).y},f=function(l,n){return this.getPosition(l,n).x},e=function(l,n,j){b.fx.applyTranslate(this,l,n,j)},h=function(l,n){b.fx.applyScale(this,l,n)},i=function(l){b.fx.applyRotate(this,
l)},m=function(l,n,j){b.ux.gesture.listenTo(this,l,n,j)},p=function(l,n){b.ux.gesture.unlistenTo(this,l,n)};a.winkGetPosition=d;a.winkGetTopPosition=g;a.winkGetLeftPosition=f;a.winkTranslate=e;a.winkScale=h;a.winkRotate=i;a.winkListenToGesture=m;a.winkUnlistenToGesture=p;if(c(a.getPosition))a.getPosition=d;if(c(a.getTopPosition))a.getTopPosition=g;if(c(a.getLeftPosition))a.getLeftPosition=f;if(c(a.rotate))a.rotate=i;if(c(a.scale))a.scale=h;if(c(a.translate))a.translate=e;if(c(a.listenToGesture))a.listenToGesture=
m;if(c(a.unlistenToGesture))a.unlistenToGesture=p;return b});define(["../../../_base/_base/js/base"],function(b){b.error={logLevel:0,log:function(a){if(this.logLevel==1)typeof console!="undefined"?console.log(a):alert(a)}};b.log=b.bind(b.error.log,b.error);return b.error});
define(["../../../_base/_base/js/base"],function(b){var a=window.JSON;b.json={parse:function(c){if(b.isSet(a)&&b.isSet(a.parse))return a.parse(c);else{var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;c=String(c);d.lastIndex=0;if(d.test(c))c=c.replace(d,function(f){return"\\u"+("0000"+f.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(c.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))var g=eval("("+c+")");return g}},concat:function(c,d){for(var g in d)c[g]=d[g];return c}};b.parseJSON=b.bind(b.json.parse,b.json);b.mixin=b.bind(b.json.concat,b.json);return b.json});
define(["../../../_base/_base/js/base","../../error/js/error"],function(b){var a=[],c=function(f,e){if(b.isCallback(e)){var h=[f.toLowerCase(),e];a.push(h)}},d=function(f,e){var h=f.toLowerCase(),i,m=a.length;for(i=0;i<m;i++){var p=a[i];if(p[0]==h&&p[1].method==e.method&&p[1].context==e.context){a.splice(i,1);break}}},g=function(f,e){var h=f.toLowerCase(),i,m=a.length;for(i=0;i<m;i++){var p=a[i];p&&p[0]==h&&b.isSet(p[1])&&b.call(p[1],e)}};b.topics={subscribe:c,unsubscribe:d,publish:g,_getTopics:function(){return a}};
b.publish=g;b.subscribe=c;b.unsubscribe=d;return b.topics});
define(["../../../_base/_base/js/base"],function(b){var a,c,d,g,f,e,h,i,m,p,l,n,j,k,o,q,s,r,t,u,w,B,C,E;a=c=d=g=f=e=h=i=w=B=C=E=false;m=p=l=n=j=k=o=q=s=0;var x=b.isSet;c=function(z,D){return RegExp(z).test(D)};var y=function(z,D,A){var v={v:0,r:0,u:0};z=RegExp(D).exec(z);if(x(z)&&z.length>1){z=z[2];D=RegExp("[^\\"+A+"0-9]").exec(z);if(x(D))z=z.slice(0,D.index);A=z.split(A);if(A.length>0)v.v=A[0];if(A.length>1)v.r=A[1];if(A.length>2)v.u=A[2];if(A.length>3)v.u+="."+A[3]}return v};a=navigator||{};r=
a.userAgent;t=a.platform;u=a.appVersion;a=c(" AppleWebKit/",r);B=c(/bada/gi,r);C=c(/Opera/gi,r);if(x(t)){if(c(/iphone/i,t))d=true;if(c(/ipod/i,t))g=true;if(c(/ipad/i,t))f=true;if(c(/blackberry/i,t))w=true}if(x(u)){if(c(/android/i,u))e=true;if(c(/safari/i,u)){h=true;t=y(u,"( Version/)([^ ]+)",".");n=t.v;j=t.r;k=t.u}if(c(/MSIE/i,u)){E=true;t=y(u,"( MSIE )([^ ]+)",".");n=t.v;j=t.r}}if(!h&&!a)i=c(/mozilla/i,r);c=d||g||e||w||B||c(" Mobile/",r);if(a){t=y(r,"( AppleWebKit/)([^ ]+)",".");m=t.v;p=t.r;l=t.u}if(c&&
x(u)){o=e?["( Android )([^ ]+)","."]:["( OS )([^ ]+)","_"];if(w)o=["( BlackBerry )([^ ]+)","."];y=y(u,o[0],o[1]);o=y.v;q=y.r;s=y.u}b.ua={isWebkit:a,isMobile:c,isIPhone:d,isIPod:g,isIPad:f,isIOS:d||g||f,isAndroid:e,isBlackBerry:w,isBada:B,isOpera:C,isSafari:h,isMozilla:i,isIE:E,webkitVersion:m,webkitMinorVersion:p,webkitUpdateVersion:l,browserVersion:n,browserMinorVersion:j,browserUpdateVersion:k,osVersion:o,osMinorVersion:q,osUpdateVersion:s};return b.ua});
define(["../../../_base/_base/js/base"],function(b){function a(e){if(d(g[e]))g[e]=g[e]();return g[e]}function c(e,h,i){if(typeof g[e]=="undefined"){var m=h;if(i&&d(h))m=h();g[e]=m}}function d(e){return typeof e=="function"}var g={},f={};b.has=a;b.has.prefixes=["-webkit-","-moz-","-o-","ms-","-khtml-"];b.has.prefix=null;b.has.inquire=c;b.has.inquireMap=function(e,h){if(!(!e||e.length==0))for(var i in e)c(i,e[i],h)};b.has.setProp=function(e,h){f[e]=h};b.has.deferProp=function(e,h){f[e]=d(h)?h:function(){a(h)}};
b.has.prop=function(e){var h=f[e];if(d(h)){h();h=f[e];if(d(h))h=e}return h||e};return b.has});define(["../../../_base/_base/js/base","./feat"],function(b){b=b.has;var a=b.inquire,c=window;a("json-parse",function(){var d;d=false;if(c.JSON&&typeof JSON.parse=="function"){d=JSON.parse('{"w":1}');d=!!(d&&d.w)}return d});return b});
define(["../../../_base/_base/js/base","./feat"],function(b){function a(k){var o=false;if(typeof p[k]==n){f(k,k);o=true}else{var q=d.prefix;q=q!=null?[q]:l;var s,r=q.length;for(s=0;s<r;s++){var t,u=q[s]+k;t=u;var w=/(-)([a-z])/;for(u=u.match(w);u!=null;){t=t.replace(w,RegExp.$2.toUpperCase());u=t.match(w)}t=t;if(typeof p[t]==n){d.prefix=q[s];f(k,t);o=true;break}}}return o}function c(k){return function(){a(k)}}var d=b.has,g=d.inquireMap,f=d.setProp,e=d.deferProp,h=window,i=h.document,m=i.createElement("div"),
p=m.style,l=d.prefixes,n="string",j={a:"transform-property",b:"transition-property",c:"transition-duration",d:"transition-delay",e:"transition-timing-function",f:"border-radius",g:"text-shadow",h:"box-shadow",i:"gradient",j:"perspective",k:"transform-origin",l:"transform-style",m:"transform",n:"css-transition",o:"css-perspective",p:"css-transform",q:"perspective-origin",r:"backface-visibility",s:"tap-highlight-color",t:"user-select",bg:"background-image"};e(j.a,j.p);e(j.m,j.p);e(j.b,j.n);e(j.c,j.n);
e(j.d,j.n);e(j.e,j.n);e(j.f,"css-border-radius");e(j.g,"css-text-shadow");e(j.h,"css-box-shadow");e(j.i,"css-gradient");e(j.j,j.o);e(j.k,j.o);e(j.l,j.o);e(j.q,j.o);e(j.r,c(j.r));e(j.s,c(j.s));e(j.t,c(j.t));g({"css-transform":function(){var k=a(j.m),o=d.prefix,q=j.m;if(o!=null)q=o+q;k?f(j.a,d.prop(j.m)):f(j.a,j.m);f(j.m,q);return k},"css-transition":function(){var k=true;return k=(k=(k=(k=k&&a(j.b))&&a(j.c))&&a(j.d))&&a(j.e)},"css-translate3d":function(){return d("css-matrix")},"css-border-radius":function(){return a(j.f)},
"css-text-shadow":function(){return a(j.g)},"css-box-shadow":function(){return a(j.h)},"css-gradient":function(){var k=j.i,o=j.bg,q=d.prefix;q=q!=null?["",q]:[""].concat(l);var s,r=q.length;for(s=0;s<r;s++){var t=q[s]+k;p.cssText=o+":"+(t+"(linear,left top,right bottom,from(#9f9),to(white));");if(p[o]&&p[o].indexOf(k)!=-1){f(k,t);return true}}return false},"css-perspective":function(){var k=a(j.j)&&a(j.k)&&a(j.l)&&a(j.q);k=k&&a(j.k+"-x")&&a(j.k+"-y")&&a(j.k+"-z");if(!k)return false;var o=d.prefix||
"";k=i.createElement("style");k.textContent="@media ("+o+"transform-3d){#wink_has{height:2px}}";i.getElementsByTagName("head")[0].appendChild(k);m.id="wink_has";i.documentElement.appendChild(m);o=m.offsetHeight===2;k.parentNode.removeChild(k);m.parentNode.removeChild(m);return o},"css-matrix":function(){var k=h.WebKitCSSMatrix;if(typeof k=="undefined")return false;var o=new k("matrix(1,0,0,1,6,7)"),q=o.m41==6&&o.m42==7&&o.m41==o.e&&o.m42==o.f;if(q){k=new k("matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,6,7,8,1)");
q=q&&o.m41==k.m41&&o.m42==k.m42&&k.m43==8}return q},"css-matrix-stack-inversed":function(){var k=b.ua;if(!d("css-matrix")||!k)return false;var o=k.isIOS?parseInt(""+k.osVersion+k.osMinorVersion+k.osUpdateVersion):500;k=k.isAndroid?parseInt(""+k.osVersion+k.osMinorVersion+k.osUpdateVersion):300;return o<421||k<300},"css-position-fixed":function(){var k=b.ua;if(k.isAndroid&&k.osVersion==2&&k.osMinorVersion==1||k.isBada)return false;if(k.isIOS)return k.osVersion<5?false:true;k=document.body;if(document.createElement&&
k&&k.appendChild&&k.removeChild){if(!m.getBoundingClientRect)return null;m.innerHTML="x";m.style.cssText="position:fixed;top:100px;";k.appendChild(m);var o=k.style.height,q=k.scrollTop;k.style.height="3000px";k.scrollTop=500;var s=m.getBoundingClientRect().top;k.style.height=o;o=s===100;k.removeChild(m);k.scrollTop=q;return o}return false}});return d});
define(["../../../_base/_base/js/base","./feat"],function(b){function a(h){return"on"+e[h]in f}var c=b.has;b=c.inquireMap;var d=c.setProp,g=c.deferProp,f=window.document.documentElement,e={ts:"touchstart",tm:"touchmove",te:"touchend",gs:"gesturestart",gc:"gesturechange",ge:"gestureend",tre:"transitionend"};g(e.ts,e.ts);g(e.tm,e.tm);g(e.te,e.te);g(e.tre,e.tre);b({touchstart:function(){var h=a("ts");d(e.ts,h?e.ts:"mousedown");return h},touchmove:function(){var h=a("tm");d(e.tm,h?e.tm:"mousemove");return h},
touchend:function(){var h=a("te");d(e.te,h?e.te:"mouseup");return h},touch:function(){return c(e.ts)&&c(e.tm)&&c(e.te)},gesturestart:function(){return a("gs")},gesturechange:function(){return a("gc")},gestureend:function(){return a("ge")},gesture:function(){return c(e.gs)&&c(e.gc)&&c(e.ge)},transitionend:function(){if(c("css-transition")){var h=c.prefix,i=e.tre;if(h=="-webkit-")i="webkitTransitionEnd";else if(h=="-o-")i="oTransitionEnd";d(e.tre,i);return true}return false}});return c});
define(["../../../_base/_base/js/base","./feat"],function(b){return b.has});
define(["../../../_base/_base/js/base","../../../_base/_feat/js/feat_css"],function(b){var a=b.isSet,c=b.has.prop,d={u:undefined},g=function(l,n){var j=l.className;if((" "+j+" ").indexOf(" "+n+" ")<0)l.className=j+(j?" ":"")+n},f=function(l,n){var j=b.trim((" "+l.className+" ").replace(" "+n+" "," "));if(l.className!=j)l.className=j},e=function(l,n){var j,k=l.style;for(j in n){var o=c(j);k[o]=n[j]}},h=function(l,n,j,k,o){var q=n;if(n.indexOf(",")==-1)q=c(n);else{n=n.split(",");var s=n.length;for(q=
0;q<s;q++)n[q]=c(b.trim(n[q]));q=n.join(",")}e(l,{"transition-property":q,"transition-duration":j,"transition-delay":k,"transition-timing-function":o})},i=function(l){return window.getComputedStyle(l)[c("transform-property")]},m=function(l,n){e(l,{"transform-property":n})},p=function(l,n,j,k,o,q,s){var r=l._cssT||{};r=l._cssT={t:a(n)||a(j)?{tx:n,ty:j}:r.t,s:a(k)||a(o)?{sx:k,sy:o}:r.s,r:a(q)?{a:q}:r.r};k=r.t&&(a(r.t.tx)||a(r.t.ty));j=r.s&&(a(r.s.sx)||a(r.s.sy));n=r.r&&a(r.r.a);if(!b.has("css-translate3d")||
b.ua.isAndroid&&(j||n))s=true;if(k){o=r.t.ty;s=s;k="";k=r.t.tx;a(k)||(k=0);o=o;a(o)||(o=0);q="0";var t=false;t=(t=t||b.isString(k)&&k.indexOf("%",0)!=-1)||b.isString(o)&&o.indexOf("%",0)!=-1;if(!t){k+="px";o+="px";q+="px"}s=k=s?"translate("+k+", "+o+")":"translate3d("+k+", "+o+", "+q+")"}else s="";s=s;if(j){j=r.s.sy;k="";k=r.s.sx;a(k)||(k=1);j=j;a(j)||(j=1);j=k=b.has("css-perspective")?"scale3d("+k+", "+j+", 1)":"scale("+k+", "+j+")"}else j="";j=j;if(n){n="";r=r.r.a;a(r)||(r=0);r=n="rotate("+r+"deg)"}else r=
"";r=b.trim(s+" "+j+" "+r);m(l,r)};b.fx={addClass:g,removeClass:f,apply:e,applyTransition:h,applyTransformTransition:function(l,n,j,k){h(l,"transform",n,j,k)},onTransitionEnd:function(l,n,j){var k=c("transitionend"),o=function(q){j!==true&&l.removeEventListener(k,o,false);n(q)};l.addEventListener(k,o,false);return o},getTransformPosition:function(l){var n={x:null,y:null};l=i(l);if(b.has("css-matrix")){if(l=="none")l="";l=new WebKitCSSMatrix(l);n.x=l.m41;n.y=l.m42}else{var j=RegExp(/matrix/i);if(j.test(l)){j=
RegExp("[, ()]+","g");l=l.split(j);if(l.length>6&&l[0]=="matrix"){n.x=parseInt(l[5]);n.y=parseInt(l[6])}}}return n},applyTranslate:function(l,n,j,k){p(l,n,j,d.u,d.u,d.u,k)},applyScale:function(l,n,j){p(l,d.u,d.u,n,j,d.u,d.u)},applyRotate:function(l,n){p(l,d.u,d.u,d.u,d.u,n,d.u)},getTransform:i,setTransform:m};b.addClass=g;b.removeClass=f;return b.fx});define(["../../../_base/_base/js/base"],function(b){b.math={round:function(a,c){b.isSet(c)||(c=0);var d=Math.pow(10,c);return Math.round(a*d)/d}};return b.math});
define(["../../../_base/_base/js/base","../../../_base/error/js/error","../../../_base/json/js/json"],function(b){var a=b.isSet;b.ux.Event=function(c){this.uId=b.getUId();b.mixin(this,c);this._validateProperties()};b.ux.Event.prototype={preventDefault:function(){this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},dispatch:function(c,d){var g=this.srcEvent,f=g.type;if(a(d))f=d;f=f;var e="HTMLEvents";if(/blur|focus|resize|scroll/i.test(f))e="UIEvent";else if(/click|mouse(down|move|up)/i.test(f))e=
"MouseEvent";else if(/touch(start|move|end|cancel)/i.test(f))e="TouchEvent";var h=document.createEvent(e),i=g.changedTouches;if(e=="HTMLEvents")h.initEvent(f,g.bubbles,g.cancelable);else if(e=="UIEvent")h.initUIEvent(f,g.bubbles,g.cancelable,window,g.detail);else if(e=="MouseEvent"){e=g.screenX;var m=g.screenY,p=g.clientX,l=g.clientY;if(g.initTouchEvent&&i&&i.length>0){i=i[0];e=i.screenX;m=i.screenY;p=i.clientX;l=i.clientY}h.initMouseEvent(f,g.bubbles,g.cancelable,document.defaultView,g.detail,e,
m,p,l,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,g.button,g.relatedTarget)}else e=="TouchEvent"&&h.initTouchEvent(f,g.bubbles,g.cancelable,window,g.detail,g.screenX,g.screenY,g.clientX,g.clientY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,g.touches,g.targetTouches,i,g.scale,g.rotation);c.dispatchEvent(h)},_validateProperties:function(){return true}};return b.ux.Event});
define(["../../../_base/_base/js/base","../../../_base/error/js/error","../../../_base/_feat/js/feat_event","../../event/js/event"],function(b){var a=[],c=b.has.prop,d={start:c("touchstart"),move:c("touchmove"),end:c("touchend"),gesturestart:c("gesturestart"),gesturechange:c("gesturechange"),gestureend:c("gestureend")},g={};for(var f in d)g[d[f]]=f;var e=function(i){var m={};m.x=i.pageX;m.y=i.pageY;m.target=i.target;return m},h=function(i){var m,p=a.length;for(m=0;m<p;m++)if(a[m].domNode==i)return m;
return null};b.ux.touch={addListener:function(i,m,p,l){if(b.isUndefined(d[m])){b.log("[touch] Cannot add listener for unknown eventType: "+m);return false}b.isSet(l)||(l={});if(l===true)l={preventDefault:true};l={preventDefault:l.preventDefault===true?true:false,tracking:l.tracking===false?false:true,captureFlow:l.captureFlow===true?true:false};var n=null,j=h(i);if(j==null){n=new b.ux.touch.Element({domNode:i,tracking:l.tracking});a.push(n)}else n=a[j];if(!n.isListening(m)){if(n.eventHandler==null)n.eventHandler=
function(k){var o=n,q=g[k.type],s={};s.type=q;s.srcEvent=k;s.timestamp=k.timeStamp;s.multitouch=false;if(!s.timestamp)s.timestamp=(new Date).getTime();if(b.has("touch"))if(q=="gesturestart"||q=="gesturechange"||q=="gestureend"){s.target=k.target;s.x=0;s.y=0}else{var r=null;if(q=="end"){if(k.changedTouches&&k.changedTouches.length>0)r=k.changedTouches[0]}else if(k.targetTouches&&k.targetTouches.length>0)r=k.targetTouches[0];else if(k.changedTouches&&k.changedTouches.length>0)r=k.changedTouches[0];
if(r!=null){r=e(r);s.x=r.x;s.y=r.y;s.target=r.target;if(k.touches&&k.touches.length>1)s.multitouch=true}}else{r=e(k);s.x=r.x;s.y=r.y;s.target=r.target}k=new b.ux.Event(s);if(!o.isListening("start")||o.tracking==false)o.tracked=true;else if(q=="start")o.tracked=true;if(o.tracked==true){if(q=="end")o.tracked=false;o.notifyEvent(k)}};n.eventCaptures[m]=l.captureFlow;n.domNode.addEventListener(d[m],n.eventHandler,n.eventCaptures[m])}n.addEventCallback(m,p,l.preventDefault)},removeListener:function(i,
m,p){i=h(i);if(i!=null){i=a[i];i.removeEventCallback(m,p);i.isListening(m)||i.domNode.removeEventListener(d[m],i.eventHandler,i.eventCaptures[m])}},getTouchProperties:e};b.ux.touch.Element=function(i){this.uId=b.getUId();this.tracked=false;this.eventHandler=null;this.eventCaptures={};this._els={};b.mixin(this,i);this._validateProperties()};b.ux.touch.Element.prototype={addEventCallback:function(i,m,p){if(!b.isCallback(m))return false;var l=this._els[i];if(l){i=l.callbacks;var n=i.length;for(p=0;p<
n;p++){var j=i[p];if(m.context==j.context&&m.method==j.method)return false}}else{l={preventDefault:p,callbacks:[]};this._els[i]=l}l.callbacks.push(m);return true},removeEventCallback:function(i,m){if(!b.isCallback(m))return false;var p=this._els[i];if(!p)return false;var l=p.callbacks,n,j=l.length;for(n=0;n<j;n++){var k=l[n];if(m.context==k.context&&m.method==k.method){p.callbacks.splice(n,1);break}}return true},isListening:function(i){if((i=this._els[i])&&i.callbacks.length>0)return true;return false},
notifyEvent:function(i){var m=this._els[i.type];if(m){m.preventDefault==true&&i.preventDefault();m=m.callbacks;for(var p=0;p<m.length;p++)b.call(m[p],i)}},_validateProperties:function(){return true}};return b.ux.touch});
define(["../../../_base/_base/js/base","../../../_base/error/js/error"],function(b){var a=b.isSet,c=b.isArray;b.net.Xhr=function(d){this.uId=b.getUId();this.request={xhrObject:null,params:d};this._create()};b.net.Xhr.prototype={sendData:function(d,g,f,e,h,i){var m=this.request,p=m.xhrObject,l=encodeURIComponent;f=f.toUpperCase();if(!(a(g)&&!c(g))){if(p){var n=null;if(a(g)){var j,k=g.length;for(j=0;j<k;j++){var o=g[j],q=o.name;o=o.value;if(f=="GET")d+=j==0&&d.indexOf("?")==-1?"?"+l(q)+"="+l(o):"&"+
l(q)+"="+l(o);else if(j==0)n=l(q)+"="+l(o);else n+="&"+l(q)+"="+l(o)}}try{p.open(f,d,true);p.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8");if(a(i))if(c(i)){k=i.length;for(j=0;j<k;j++){var s=i[j];p.setRequestHeader(s.name,s.value)}}p.send(n)}catch(r){return false}p.onreadystatechange=function(){if(p.readyState==4){var t=p.status;if(t>=200&&t<400||t==0)a(e)&&b.call(e,m);else a(h)&&b.call(h,m)}}}else return false;return true}},_create:function(){var d=window.XMLHttpRequest;
if(d){var g;try{g=new d}catch(f){g=false}this.request.xhrObject=g}}};b.Xhr=b.net.Xhr;return b.Xhr});
define(["../../../../_base/_base/js/base","../../../../fx/_xy/js/2dfx"],function(b){var a=b.fx.apply,c=null,d=null,g=false;b.ui.xy.layer={visible:false,color:"#000",opacity:0.3,zIndex:998,show:function(){g||this._initDom();c.onclick=function(){var f=b.ui.xy.layer.onclick;b.isSet(f)&&f()};if(!this.visible){a(d,{height:document.body.scrollHeight+"px"});a(c,{display:"block"});this.visible=true}},hide:function(){if(g&&this.visible){a(c,{display:"none"});this.visible=false}},refresh:function(){g&&this.visible&&
a(d,{height:document.body.scrollHeight+"px"})},update:function(){g||this._initDom();a(c,{"z-index":this.zIndex});a(d,{backgroundColor:this.color,opacity:this.opacity})},_initDom:function(){var f=document;c=f.createElement("div");a(c,{position:"absolute",display:"none",top:0,width:"100%","z-index":this.zIndex,"tap-highlight-color":"rgba(0, 0, 0, 0)"});d=f.createElement("div");a(d,{width:"100%",backgroundColor:this.color,opacity:this.opacity});c.appendChild(d);f.body.appendChild(c);g=true}};b.layer=
b.ui.xy.layer;return b.layer});
define(["../../../_amd/core","../../../math/_matrix/js/matrix"],function(b){var a=[];b.fx.set3dTransform=function(g,f,e){if(!c(f))return false;var h;if(e===true)h=b.fx.getTransform(g);e=b.math.createTransformMatrix(h);f=d(f);e.multiply(f);b.fx.setTransform(g,e.getCssMatrix())};b.fx.initComposedTransform=function(g,f){var e;if(f===true)e=b.fx.getTransform(g);e=b.math.createTransformMatrix(e);b.fx.removeComposedTransform(g);a.push({node:g,transforms:[e]})};b.fx.setTransformPart=function(g,f,e){if(!c(e))return false;
if(f<1||f>10)return false;var h,i=a.length;for(h=0;h<i;h++){var m=a[h];if(m.node==g){g=null;if(b.isSet(e))g=d(e);m.transforms[f]=g;break}}};b.fx.applyComposedTransform=function(g,f){var e,h=a.length;for(e=0;e<h;e++){var i=a[e];if(i.node==g){e=i.transforms;h=e[0].clone();var m,p=e.length;for(m=1;m<p;m++){var l=e[m];b.isSet(l)&&h.multiply(l)}if(f===true)i.transforms=[h];b.fx.setTransform(g,h.getCssMatrix());break}}};b.fx.storeComposedTransform=function(g){b.fx.applyComposedTransform(g,true)};b.fx.removeComposedTransform=
function(g){var f,e=a.length;for(f=0;f<e;f++)if(a[f].node==g){a.splice(f,1);break}};var c=function(g){var f=true,e=b.isSet;if(e(g)){var h=["translate","scale","rotate"];if((f=(f=(f=(f=(f=f&&e(g.type))&&h.indexOf(g.type)!=-1)&&e(g.x))&&e(g.y))&&e(g.z))&&g.type=="rotate")f=f&&e(g.angle)}return f},d=function(g){var f=b.math.createTransformMatrix();switch(g.type){case "translate":f.translate(g.x,g.y,g.z);break;case "scale":f.scale(g.x,g.y,g.z);break;case "rotate":f.rotateAxisAngle(g.x,g.y,g.z,g.angle);
break}return f};return b.fx});
define(["../../../_amd/core"],function(b){b.math.radToDeg=function(a){return a*180/Math.PI};b.math.degToRad=function(a){return a*Math.PI/180};b.math.getAngle=function(a,c){var d=Math.abs(c);if(d>a*2)d=a*2;var g=2*a*a;d=Math.acos(-((Math.pow(d,2)-(Math.pow(a,2)+Math.pow(a,2)))/g));if(isNaN(d))d=0;return d};b.math.getAngleBetweenVectors=function(a,c){var d=b.math.getScalarVector(a,c),g=b.math.getNormVector(a)*b.math.getNormVector(c);d=Math.acos(d/g);if(isNaN(d))d=0;return d};b.math.normalizeVector=
function(a){var c=[0,0,0,1],d=b.math.getNormVector(a);if(d<=0)return c;c[0]=a[0]/d;c[1]=a[1]/d;c[2]=a[2]/d;return c};b.math.getNormVector=function(a){a=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];return a=Math.sqrt(a)};b.math.getNormalVector=function(a,c){var d=[0,0,0,1];d[0]=a[1]*c[2]-a[2]*c[1];d[1]=a[2]*c[0]-a[0]*c[2];d[2]=a[0]*c[1]-a[1]*c[0];return d};b.math.getScalarVector=function(a,c){var d=0;return d=a[0]*c[0]+a[1]*c[1]+a[2]*c[2]};b.math.getVector=function(a,c){var d=[0,0,0,1];d[0]=c[0]-a[0];d[1]=c[1]-a[1];
d[2]=c[2]-a[2];return d};b.math.multiplyMatrixVector=function(a,c){var d=[0,0,0,1];c[3]||(c[3]=1);d[0]=c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]*a[3];d[1]=c[0]*a[4]+c[1]*a[5]+c[2]*a[6]+c[3]*a[7];d[2]=c[0]*a[8]+c[1]*a[9]+c[2]*a[10]+c[3]*a[11];d[3]=c[0]*a[12]+c[1]*a[13]+c[2]*a[14]+c[3]*a[15];return d};return b.math});
define(["../../../_amd/core"],function(b){b.math.createTransformMatrix=function(a){var c=new b.math.Matrix({});b.isSet(a)&&c.loadCssTransform(a);return c};b.math.Matrix=function(a){this.uId=b.getUId();this._properties=a;this._values=[];this._cssMatrix=null;this._validateProperties()!==false&&this._initProperties()};b.math.Matrix.prototype={scale:function(a,c,d){this._load(this._cssMatrixToValues(this._cssMatrix.scale(a,c,d)))},translate:function(a,c,d){this._load(this._cssMatrixToValues(this._cssMatrix.translate(a,
c,d)))},rotateAxisAngle:function(a,c,d,g){this._load(this._cssMatrixToValues(this._cssMatrix.rotateAxisAngle(a,c,d,g)))},multiply:function(a){a=a.getCssMatrix();var c=this._cssMatrix;if(b.has("css-matrix-stack-inversed")){var d=a;a=c;c=d}this._load(this._cssMatrixToValues(a.multiply(c)))},clone:function(){return new b.math.Matrix({values:this._values})},loadCssTransform:function(a){if(isString(a)){if(a.indexOf("matrix3d")!=-1){a=a.substring(9,a.length-1).split(", ");for(var c=[],d=0;d<a.length;d++)c[d]=
a[d]*1;this._load(c)}}else try{this._load(this._cssMatrixToValues(a))}catch(g){}},getValues:function(){return this._values},getCssMatrix:function(){return this._cssMatrix},_validateProperties:function(){return true},_initProperties:function(){b.isSet(this._properties.values)?this._load(this._properties.values):this._loadIdentity()},_loadIdentity:function(){this._load([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},_load:function(a){if(!b.isSet(a)||a.length!=16)return false;this._values=a;this._cssMatrix=this._valuesToCssMatrix(this._values)},
_valuesToCssMatrix:function(a){var c=new WebKitCSSMatrix;c.m11=a[0];c.m12=a[1];c.m13=a[2];c.m14=a[3];c.m21=a[4];c.m22=a[5];c.m23=a[6];c.m24=a[7];c.m31=a[8];c.m32=a[9];c.m33=a[10];c.m34=a[11];c.m41=a[12];c.m42=a[13];c.m43=a[14];c.m44=a[15];return c},_cssMatrixToValues:function(a){var c=[];c[0]=a.m11;c[1]=a.m12;c[2]=a.m13;c[3]=a.m14;c[4]=a.m21;c[5]=a.m22;c[6]=a.m23;c[7]=a.m24;c[8]=a.m31;c[9]=a.m32;c[10]=a.m33;c[11]=a.m34;c[12]=a.m41;c[13]=a.m42;c[14]=a.m43;c[15]=a.m44;return c}};return b.math});
define(["../../../_amd/core"],function(b){b.ux.history={_historyTimer:null,_historyQueue:[],_historyIndex:0,_historyCheckInterval:100,start:function(){window.location.hash="";this._historyQueue.push({hash:"",id:"main",params:""});if("onhashchange"in window)window.addEventListener("hashchange",b.bind(function(){this._check()},this),true);else this._historyTimer=b.setInterval(this,"_check",this._historyCheckInterval)},stop:function(){"onhashchange"in window?window.removeEventListener("hashchange",b.bind(function(){this._check()},
this),true):clearInterval(this._historyTimer)},push:function(a,c,d){b.isSet(d)||(d=b.getUId());window.location.hash=d;this._historyQueue.splice(this._historyIndex+1,this._historyQueue.length-this._historyIndex-1);this._historyQueue.push({hash:d,id:a,params:c});this._historyIndex=this._historyQueue.length-1},pop:function(a){for(var c=this._historyIndex-1;c>=0;c--)if(this._historyQueue[c]&&this._historyQueue[c].id==a){window.history.back(c-this._historyIndex);this._historyIndex=c;return}window.history.back(-this._historyIndex);
this._historyIndex=0},updateCheckInterval:function(a){if(!("onhashchange"in window)){this.stop();this._historyCheckInterval=a;this._historyTimer=b.setInterval(this,"_check",this._historyCheckInterval)}},_check:function(){if(this._historyQueue.length>0)for(var a=window.location.hash.substring(1,window.location.hash.length),c=this._historyQueue.length,d=0;d<c;d++)if(a==this._historyQueue[d].hash&&d!=this._historyIndex){if(d<this._historyIndex)for(a=this._historyIndex;a>d;a--)b.publish("/history/events/back",
{id:this._historyQueue[a-1].id,params:this._historyQueue[a-1].params});else if(d>this._historyIndex)for(a=this._historyIndex;a<d;a++)b.publish("/history/events/forward",{id:this._historyQueue[a+1].id,params:this._historyQueue[a+1].params});this._historyIndex=d;break}}};b.ux.history.start();return b.ux.history});
define(["../../../_amd/core","../../movementtracker/js/movementtracker"],function(b){b.ux.Inertia=function(a){this.uId=b.getUId();this._properties=a;this._movementtracker=null;if(this._validateProperties()!==false){this._initProperties();this._initListeners()}};b.ux.Inertia.prototype={_DIRECTION_X:"x",_DIRECTION_Y:"y",_INTERRUPTION_THRESHOLD:150,_EVENT_INERTIA_COMPUTED:"/inertia/events/inertiacomputed",destroy:function(){this._removeListeners()},_validateProperties:function(){return true},_initProperties:function(){this._movementtracker=
this._properties.movementtracker;delete this._properties},_initListeners:function(){b.subscribe("/movementtracker/events/mvtstored",{context:this,method:"_computeInertia"})},_removeListeners:function(){b.unsubscribe("/movementtracker/events/mvtstored",{context:this,method:"_computeInertia"})},_computeInertia:function(a){if(a.publisher.uId==this._movementtracker.uId){var c=a.movement,d={pointStatement:c.pointStatement},g=this._getSignificantMovement(c,this._DIRECTION_X);c=this._getSignificantMovement(c,
this._DIRECTION_Y);var f=g.pointStatement[0],e=c.pointStatement[0],h=g.pointStatement[g.pointStatement.length-1],i=c.pointStatement[c.pointStatement.length-1];d.dx=Math.abs(h.x-f.x);d.dy=Math.abs(i.y-e.y);d.dtx=h.globalDuration-f.globalDuration;if(d.dtx==0)d.dtx=1;d.dty=i.globalDuration-e.globalDuration;if(d.dty==0)d.dty=1;d.directionX=g.direction;d.directionY=c.direction;d.speedX=d.dx/d.dtx;d.speedY=d.dy/d.dty;b.publish(this._EVENT_INERTIA_COMPUTED,{publisher:this,movement:d,uxEvent:a.uxEvent,target:a.target})}},
_getSignificantMovement:function(a,c){var d=this._extractDirectedMovement(a,c);d=this._extractInterruptedMovement(d[d.length-1]);return d[d.length-1]},_extractDirectedMovement:function(a,c){var d=[],g=a.pointStatement,f=0,e=g[0].directionX;if(c==this._DIRECTION_Y)e=g[0].directionY;for(var h=0;h<g.length;h++){var i=g[h],m=i.directionX;if(c==this._DIRECTION_Y)m=i.directionY;if(e!=m||h==g.length-1){i=h;if(h==g.length-1)i=g.length;f={pointStatement:g.slice(f,i),direction:e};d.push(f);f=h;e=m}}return d},
_extractInterruptedMovement:function(a){for(var c=[],d=a.pointStatement,g=0,f=0,e=0;e<d.length;e++){f+=d[e].duration;var h=e;if(f>this._INTERRUPTION_THRESHOLD||e==d.length-1){if(e==d.length-1&&f<=this._INTERRUPTION_THRESHOLD)h=d.length;f=0;var i=d.slice(g,h);i={pointStatement:i,direction:a.direction};c.push(i);g=e;if(e==d.length-1&&f>this._INTERRUPTION_THRESHOLD){i=d.slice(h,h+1);i={pointStatement:i,direction:a.direction};c.push(i)}}}return c}};return b.ux.Inertia});
define(["../../../_amd/core"],function(b){b.ux.MovementTracker=function(a){this.uId=b.getUId();this._properties=a;this._previousPoint=this._startPoint=this._pointStatement=this._target=null;this._tracking=false;this._acceptEvents=true;this._multitouch=false;this._params={captureFlow:true,preventStart:true,preventMove:false,shiftThreshold:0,trackThresholdX:0,trackThresholdY:0};if(this._validateProperties()!==false){this._initProperties();this._initListeners()}};b.ux.MovementTracker.prototype={updateTrackThresholdX:function(a){if(this._isValidThreshold(a))this._params.trackThresholdX=
a;else this._raisePropertyError("trackThresholdX")},updateTrackThresholdY:function(a){if(this._isValidThreshold(a))this._params.trackThresholdY=a;else this._raisePropertyError("trackThresholdY")},destroy:function(){this._removeListeners()},_validateProperties:function(){return true},_isValidThreshold:function(a){return b.isInteger(a)&&a>=0},_raisePropertyError:function(a){b.log("[MovementTracker] Error: "+a+" missing or invalid")},_initProperties:function(){this._target=$(this._properties.target);
if(this._properties.captureFlow===false)this._params.captureFlow=false;if(this._properties.preventStart===false)this._params.preventStart=false;if(this._properties.preventMove===true)this._params.preventMove=true;if(b.isSet(this._properties.trackThresholdX))this._params.trackThresholdX=this._properties.trackThresholdX;if(b.isSet(this._properties.trackThresholdY))this._params.trackThresholdY=this._properties.trackThresholdY;delete this._properties},_initListeners:function(){b.ux.touch.addListener(this._target,
"start",{context:this,method:"_handleTouchStart"},{preventDefault:this._params.preventStart,captureFlow:this._params.captureFlow});b.ux.touch.addListener(this._target,"move",{context:this,method:"_handleTouchMove"},{preventDefault:this._params.preventMove,captureFlow:this._params.captureFlow});b.ux.touch.addListener(this._target,"end",{context:this,method:"_handleTouchEnd"},{captureFlow:this._params.captureFlow})},_removeListeners:function(){b.ux.touch.removeListener(this._target,"start",{context:this,
method:"_handleTouchStart"});b.ux.touch.removeListener(this._target,"move",{context:this,method:"_handleTouchMove"});b.ux.touch.removeListener(this._target,"end",{context:this,method:"_handleTouchEnd"})},_handleTouchStart:function(a){if(b.ua.isAndroid)if(!this.defered){this.defered=true;if((new Date).getTime()-a.timestamp>100){this._acceptEvents=false;a.preventDefault();var c,d={exec:b.bind(function(){clearTimeout(c);this._acceptEvents=true;this._handleTouchStart(a)},this)};c=b.setTimeout(d,"exec",
0);return}}if(this._acceptEvents!=false){this._multitouch=false;if(a.multitouch==true)this._multitouch=true;else{this._acceptEvents=false;this._pointStatement=[];this._previousPoint=null;this._tracking=false;this._startPoint={x:a.x,y:a.y};d=this._onNewTouch(a);b.publish(d.name,d.params);this._acceptEvents=true}}},_handleTouchMove:function(a){if(this._acceptEvents!=false)if(!this._multitouch){this._acceptEvents=false;a=this._onNewTouch(a);b.publish(a.name,a.params);this._acceptEvents=true}},_handleTouchEnd:function(a){if(this._acceptEvents!=
false)if(!this._multitouch){this._acceptEvents=false;a=this._onNewTouch(a);b.publish(a.name,a.params);this._acceptEvents=true}},_onNewTouch:function(a){if(this._tracking==false)if(this._params.trackThresholdX==0||this._params.trackThresholdY==0)this._tracking=true;else{var c={x:a.x,y:a.y},d=Math.abs(c.x-this._startPoint.x);c=Math.abs(c.y-this._startPoint.y);if(d>this._params.trackThresholdX||c>this._params.trackThresholdY)this._tracking=true}d={name:"/movementtracker/events/notrack",params:{publisher:this,
uxEvent:a,target:this._target}};if(this._tracking==false)return d;if(this._pointStatement.length==0)d.name="/movementtracker/events/mvtbegin";else if(a.type=="move")d.name="/movementtracker/events/mvtchanged";else if(a.type=="end")d.name="/movementtracker/events/mvtstored";this._addTouch(a);d.params.movement=this._getCurrentMovement();return d},_addTouch:function(a){a={x:a.x,y:a.y,timestamp:a.timestamp};var c=0,d=0,g=0,f=0,e=0,h=0;if(this._previousPoint==null){a.duration=0;a.globalDuration=0;c=a.x;
d=a.y}else{c=this._previousPoint.x;d=this._previousPoint.y;g=this._previousPoint.globalDx;f=this._previousPoint.globalDy;e=this._previousPoint.directionX;h=this._previousPoint.directionY;a.duration=a.timestamp-this._previousPoint.timestamp;a.globalDuration=a.duration+this._previousPoint.globalDuration}a.dx=Math.abs(a.x-c);a.dy=Math.abs(a.y-d);a.globalDx=a.dx+g;a.globalDy=a.dy+f;a.directionX=e;a.directionY=h;if(e==0&&this._previousPoint!=null){if(a.x<c)a.directionX=-1;else if(a.x>c)a.directionX=1;
this._previousPoint.directionX=a.directionX}if(h==0&&this._previousPoint!=null){if(a.y<d)a.directionY=-1;else if(a.y>d)a.directionY=1;this._previousPoint.directionY=a.directionY}if(e>0&&a.x+this._params.shiftThreshold<c)a.directionX=-1;else if(e<0&&a.x-this._params.shiftThreshold>c)a.directionX=1;if(h>0&&a.y+this._params.shiftThreshold<d)a.directionY=-1;else if(h<0&&a.y-this._params.shiftThreshold>d)a.directionY=1;this._pointStatement.push(a);this._previousPoint=a},_getCurrentMovement:function(){var a=
this._pointStatement[this._pointStatement.length-1];return{pointStatement:this._pointStatement,duration:a.globalDuration,dx:a.globalDx,dy:a.globalDy}}};return b.ux.MovementTracker});
define(["../../../_amd/core"],function(b){b.ux.window={height:null,width:null,fullHeight:null,fullWidth:null,screenHeight:screen.height,screenWidth:screen.width,orientation:null,_i:null,_V:"vertical",_H:"horizontal",_init:function(){var a=b.bind(this._updateData,this);"onorientationchange"in window?window.addEventListener("orientationchange",a,true):window.addEventListener("resize",a,true);if(b.ua.isAndroid){scrollTo(0,1,0);this._i=setInterval(a,1E3)}else window.addEventListener("scroll",a,true);
a()},_updateData:function(){var a=window.innerWidth,c=window.innerHeight,d=false;if(this.width+2<a||this.width-2>a||this.height+2<c||this.height-2>c)d=true;this._updateSize();this._updateOrientation();d&&b.publish("/window/events/resize",{height:c,width:a,orientation:this.orientation})},_updateSize:function(){this.height=window.innerHeight;this.width=window.innerWidth;try{this.fullHeight=document.body.scrollHeight;this.fullWidth=document.body.scrollWidth}catch(a){}},_updateOrientation:function(){var a;
a=b.isSet(window.orientation)&&b.ua.isIOS?Math.abs(window.orientation)==90?this._H:this._V:this.width>this.height?this._H:this._V;if(a!=this.orientation){this.orientation=a;b.publish("/window/events/orientationchange",{height:this.height,width:this.width,orientation:a})}}};window.addEventListener("DOMContentLoaded",function(){b.ux.window._init()});b.ux.Window=function(){this.getProperties=function(){return{screenWidth:b.ux.window.screenWidth,screenHeight:b.ux.window.screenHeight,width:b.ux.window.width,
height:b.ux.window.height,orientation:b.ux.window.orientation}}};return b.ux.window});
define(["../../../../_amd/core","../../../../ux/inertia/js/inertia"],function(b){b.ui.layout.Scroller=function(a){this.uId=b.getUId();this._direction=this._target=null;this._captureFlow=true;this._view={x:0,y:0,viewportSizeX:0,viewportSizeY:0,sizeX:0,sizeY:0,limitX:0,limitY:0,shiftOriginY:0,shiftLimitY:0,scrollbars:{x:null,y:null,active:true,width:null,backgroundColor:null,borderColor:null,opacityTransition:null},autoRefreshOptions:{active:false,checkDelay:1E3,handler:null},timerSize:null};this._scroll=
{canScrollX:false,canScrollY:false,mustScrollX:false,mustScrollY:false,friction:14,acceleration:-0.00126,minSpeed:0.05};this._transition={duration:0,delay:0,func:"cubic-bezier(0.1, 0.2, 0.5, 1)",endHandler:null};this._callbacks={scrollerTouched:null,scrollerClicked:null,startScrolling:null,scrolling:null,endScrolling:null,startSliding:null,stopSliding:null};this._inertia=this._movementtracker=null;this._activated=true;this._animated=this._moveOutside=false;this._selectionEvent=null;this._updateContext(a)};
b.ui.layout.Scroller.prototype={_DIRECTION_X:"x",_DIRECTION_Y:"y",_DIRECTION_XY:"xy",updateTargetSize:function(a,c,d){if(this._view.timerSize==null)if(d===true&&this._view.timerSize==null){this._refreshTargetSize(a,c,false);this._view.timerSize=b.setTimeout(this,"_refreshTargetSize",this._view.autoRefreshOptions.checkDelay,a,c,d)}else this._refreshTargetSize(a,c,d)},updateViewportSize:function(a,c){var d=this._target.parentNode.clientWidth,g=this._target.parentNode.clientHeight;if(b.isSet(a))d=a;
if(b.isSet(c))g=c;if(this._view.viewportSizeX!=d||this._view.viewportSizeY!=g){this._setViewportSize(d,g);this._refreshView()}},updateShiftBounds:function(a,c){var d=false;if(a!=this._view.shiftOriginY){this._view.shiftOriginY=a;if(this._view.y==0)this._view.y=a;d=true}if(c!=this._view.shiftLimitY){this._view.shiftLimitY=c;d=true}if(d){this._refreshView();this._backToBounds()}},autoRefresh:function(a){if(b.isSet(a.checkDelay)&&a.checkDelay>=0)this._view.autoRefreshOptions.checkDelay=a.checkDelay;
if(b.isSet(a.active)&&this._view.autoRefreshOptions.active!==a.active){this._view.autoRefreshOptions.active=a.active;this._listenToContentChanges(a.active)}},scrollTo:function(a,c,d){this._slideTo(a,c,{duration:d})},backToBounds:function(){this._backToBounds()},getPosition:function(){return{x:this._view.x,y:this._view.y}},getViewProperties:function(){return this._view},enable:function(){this._activated=true},disable:function(){this._activated=false},destroy:function(){this._removeListeners();this._movementtracker.destroy();
delete this._movementtracker;this._inertia.destroy();delete this._inertia;this._removeScrollbars(true,true);for(var a in this._callbacks)this._callbacks[a]=null;if(this._view.timerSize!=null){clearTimeout(this._view.timerSize);this._view.timerSize=null}b.fx.apply(this._target,{"user-select":""});b.fx.applyTransition(this._target,"","","","");b.fx.setTransform(this._target,"");this._target=null},changeContext:function(a){this.destroy();this._updateContext(a)},_setTargetSize:function(a,c){this._view.sizeX=
a;this._view.sizeY=c},_setViewportSize:function(a,c){this._view.viewportSizeX=a;this._view.viewportSizeY=c},_updateContext:function(a){this._properties=a;if(this._validateProperties()!==false){this._initProperties();this._initListeners();this._slideTo(0,0);this._refreshView()}},_validateProperties:function(){return true},_raisePropertyError:function(a){b.log("[Scroller] Error: "+a+" missing or invalid")},_initProperties:function(){this._target=$(this._properties.target);b.fx.apply(this._target,{"user-select":"none"});
if(b.isSet(this._properties.shiftOriginY))this._view.shiftOriginY=this._properties.shiftOriginY;if(b.isSet(this._properties.shiftLimitY))this._view.shiftLimitY=this._properties.shiftLimitY;this._setTargetSize(this._target.offsetWidth,this._target.offsetHeight);this._setViewportSize(this._target.parentNode.clientWidth,this._target.parentNode.clientHeight);this._direction=this._properties.direction;if(this._direction==this._DIRECTION_X||this._direction==this._DIRECTION_XY)this._scroll.mustScrollX=true;
if(this._direction==this._DIRECTION_Y||this._direction==this._DIRECTION_XY)this._scroll.mustScrollY=true;if(this._properties.captureFlow===false)this._captureFlow=false;if(b.isSet(this._properties.callbacks))for(var a in this._callbacks){var c=this._properties.callbacks[a];if(b.isSet(c))this._callbacks[a]=c}if(b.isSet(this._properties.scrollbars))for(a in this._view.scrollbars){c=this._properties.scrollbars[a];if(b.isSet(c))this._view.scrollbars[a]=c}a=this._properties.friction;if(b.isSet(a)&&b.isInteger(a)){this._scroll.friction=
Math.max(Math.min(a,100),1);this._scroll.acceleration=Math.min(-9.0E-5*this._scroll.friction,-1.0E-4);this._scroll.minSpeed=Math.sqrt(Math.abs(this._scroll.acceleration*2))}delete this._properties},_initListeners:function(){this._movementtracker=new b.ux.MovementTracker({target:this._target,captureFlow:this._captureFlow,preventStart:false,preventMove:false,trackThresholdX:5,trackThresholdY:5});b.subscribe("/movementtracker/events/notrack",{context:this,method:"_handleTouchNotTracked"});b.subscribe("/movementtracker/events/mvtbegin",
{context:this,method:"_handleMovementBegin"});b.subscribe("/movementtracker/events/mvtchanged",{context:this,method:"_handleMovementChanged"});this._inertia=new b.ux.Inertia({movementtracker:this._movementtracker});b.subscribe("/inertia/events/inertiaComputed",{context:this,method:"_handleMovementStored"});this._transition.endHandler=b.fx.onTransitionEnd(this._target,b.bind(this._handleTransitionEnd,this),true)},_removeListeners:function(){b.unsubscribe("/movementtracker/events/notrack",{context:this,
method:"_handleTouchNotTracked"});b.unsubscribe("/movementtracker/events/mvtbegin",{context:this,method:"_handleMovementBegin"});b.unsubscribe("/movementtracker/events/mvtchanged",{context:this,method:"_handleMovementChanged"});b.unsubscribe("/inertia/events/inertiaComputed",{context:this,method:"_handleMovementStored"});this._target.removeEventListener(b.has.prop("transitionend"),this._transition.endHandler,false);this._transition.endHandler=null;this._listenToContentChanges(false)},_listenToContentChanges:function(a){if(a){var c=
this._view.autoRefreshOptions.checkDelay>0;this._view.autoRefreshOptions.handler=b.bind(function(){var d=this._target.offsetHeight;if(this._view.sizeX!=this._target.offsetWidth||this._view.sizeY!=d)this.updateTargetSize(null,null,c)},this);this._target.addEventListener("DOMSubtreeModified",this._view.autoRefreshOptions.handler,false)}else if(this._view.autoRefreshOptions.handler!=null){this._target.removeEventListener("DOMSubtreeModified",this._view.autoRefreshOptions.handler,false);this._view.autoRefreshOptions.handler=
null}},_refreshTargetSize:function(a,c,d){this._view.timerSize!=null&&clearTimeout(this._view.timerSize);var g=this._target.offsetWidth,f=this._target.offsetHeight;if(b.isSet(a))g=a;if(b.isSet(c))f=c;this._view.timerSize=null;if(this._view.sizeX!=g||this._view.sizeY!=f){this._setTargetSize(g,f);this._refreshView();if(d===true)this._view.timerSize=b.setTimeout(this,"_refreshTargetSize",this._view.autoRefreshOptions.checkDelay,a,c,d)}},_refreshView:function(){var a=this._scroll.canScrollX,c=this._scroll.canScrollY;
if(this._view.sizeX>this._view.viewportSizeX){this._view.limitX=this._view.viewportSizeX-this._view.sizeX;this._scroll.canScrollX=true}else{this._view.limitX=0;this._scroll.canScrollX=false}var d=this._view.sizeY-(this._view.shiftOriginY+this._view.shiftLimitY);if(d>this._view.viewportSizeY){this._view.limitY=this._view.viewportSizeY-d;this._scroll.canScrollY=true}else{this._view.limitY=0;this._scroll.canScrollY=false}this._scroll.canScrollX?this._movementtracker.updateTrackThresholdX(5):this._movementtracker.updateTrackThresholdX(999);
this._scroll.canScrollY?this._movementtracker.updateTrackThresholdY(5):this._movementtracker.updateTrackThresholdY(999);if(a!=this._scroll.canScrollX)if(this._view.x!=0){this._view.x=0;this._slideTo(null,null,{backToBound:true,duration:1})}if(c!=this._scroll.canScrollY)if(this._view.y!=0){this._view.y=0;this._slideTo(null,null,{backToBound:true,duration:1})}if(this._view.scrollbars.active==true){if(this._scroll.canScrollX&&this._scroll.mustScrollX){a=this._view.scrollbars.x;if(a==null)a=this._view.scrollbars.x=
new b.ui.layout.Scroller.Scrollbar({direction:"x",width:this._view.scrollbars.width,backgroundColor:this._view.scrollbars.backgroundColor,borderColor:this._view.scrollbars.borderColor,opacityTransition:this._view.scrollbars.opacityTransition});a.updateSize(this._view.viewportSizeX,this._view.sizeX);this._target.parentNode.appendChild(a.getDomNode())}else this._removeScrollbars(true,false);if(this._scroll.canScrollY&&this._scroll.mustScrollY){a=this._view.scrollbars.y;if(a==null)a=this._view.scrollbars.y=
new b.ui.layout.Scroller.Scrollbar({direction:"y",width:this._view.scrollbars.width,backgroundColor:this._view.scrollbars.backgroundColor,borderColor:this._view.scrollbars.borderColor,opacityTransition:this._view.scrollbars.opacityTransition});a.updateSize(this._view.viewportSizeY,d);this._target.parentNode.appendChild(a.getDomNode())}else this._removeScrollbars(false,true);d={timeout:null,hide:function(g){clearTimeout(this.timeout);g._hideScrollbars()}};d.timeout=b.setTimeout(d,"hide",1E3,this)}},
_removeScrollbars:function(a,c){if(a==true&&this._view.scrollbars.x!=null){this._target.parentNode.removeChild(this._view.scrollbars.x.getDomNode());this._view.scrollbars.x=null}if(c==true&&this._view.scrollbars.y!=null){this._target.parentNode.removeChild(this._view.scrollbars.y.getDomNode());this._view.scrollbars.y=null}},_handleTouchNotTracked:function(a){if(a.publisher.uId==this._movementtracker.uId){a=a.uxEvent;a.type=="start"&&b.isSet(this._callbacks.scrollerTouched)&&b.call(this._callbacks.scrollerTouched,
{uxEvent:a});if(this._activated!=false){a.preventDefault();a.stopPropagation();if(a.type=="start"){this._selectionEvent=null;if(this._animated==false)this._selectionEvent=a;a=this._getInstantPosition();if(!this._isAtPosition(a.x,a.y)){b.isSet(this._callbacks.stopSliding)&&b.call(this._callbacks.stopSliding,{});this._slideTo(a.x,a.y)}}else if(a.type=="end"){this._backToBounds();this._hideScrollbars();if(b.isSet(this._selectionEvent)){b.isSet(this._callbacks.scrollerClicked)&&b.call(this._callbacks.scrollerClicked,
{uxEvent:a});this._handleSelection(a)}}}}},_handleMovementBegin:function(a){if(a.publisher.uId==this._movementtracker.uId)if(this._activated!=false){a=a.uxEvent;a.preventDefault();a.stopPropagation();b.isSet(this._callbacks.startScrolling)&&b.call(this._callbacks.startScrolling,{uxEvent:a});b.isSet(this._view.autoRefreshOptions.handler)&&this._view.autoRefreshOptions.handler()}},_handleSelection:function(a){var c=this._getProperEventTarget(a),d=c.tagName,g=c.type,f,e;if(b.isSet(d)){f=d.toLowerCase();
e=(d=f=="input"&&g?g.toLowerCase()=="text":false)||f=="textarea"}if(e||f=="select")c.focus();b.has("touch")&&a.dispatch(c,"click")},_getProperEventTarget:function(a){var c=a.target;if(a.target.nodeType==3)c=c.parentNode;return c},_handleMovementChanged:function(a){if(a.publisher.uId==this._movementtracker.uId)if(this._activated!=false){a.uxEvent.stopPropagation();var c=a.movement,d=c.pointStatement[c.pointStatement.length-2];c=c.pointStatement[c.pointStatement.length-1];var g=c.x-d.x;d=c.y-d.y;var f=
this._view.y;if(f>0)f-=this._view.shiftOriginY;else if(f<this._view.limitY)f+=this._view.shiftLimitY;this._moveOutside=false;f=this._getBoundsInfos(this._view.x,f);if(f.outsideOfBoundsX)if(f.directionX>0&&c.directionX>0||f.directionX<0&&c.directionX<0){g/=3;this._moveOutside=true}if(f.outsideOfBoundsY)if(f.directionY>0&&c.directionY>0||f.directionY<0&&c.directionY<0){d/=3;this._moveOutside=true}c=this._view.x+b.math.round(g,0);g=this._view.y+b.math.round(d,0);this._slideTo(c,g);b.isSet(this._callbacks.scrolling)&&
b.call(this._callbacks.scrolling,{uxEvent:a.uxEvent})}},_handleMovementStored:function(a){if(a.publisher.uId==this._inertia.uId)if(this._activated!=false){b.isSet(this._callbacks.endScrolling)&&b.call(this._callbacks.endScrolling,{uxEvent:a.uxEvent});a=a.movement;this._interpretInertia(a);if(!this._moveOutside&&!this._isAtPosition(a.destX,a.destY))this._slideTo(a.destX,a.destY,{duration:a.duration,speed:a.speed});else{this._backToBounds();this._hideScrollbars()}}},_interpretInertia:function(a){var c=
this._scroll.canScrollX&&this._scroll.mustScrollX,d=this._scroll.canScrollY&&this._scroll.mustScrollY,g=b.math.round(this._view.viewportSizeX/3,1),f=b.math.round(this._view.viewportSizeY/3,1),e=this._scroll.acceleration,h=this._scroll.minSpeed,i=a.speedX,m=a.speedY;i=i<h?0:i;m=m<h?0:m;h=-(i*i)/(2*e);var p=-(m*m)/(2*e),l=-i/e;e=-m/e;c||(h=l=0);d||(p=e=0);var n=this._getBoundsInfos(this._view.x+h*a.directionX,this._view.y+p*a.directionY);if(n.outsideOfBoundsX&&n.distanceToBoundX>g){g=n.distanceToBoundX-
g;var j=g/h;h-=g;l-=j*l}if(n.outsideOfBoundsY&&n.distanceToBoundY>f){g=n.distanceToBoundY-f;j=g/p;p-=g;e-=j*e}a.destX=this._view.x+b.math.round(h*a.directionX,0);a.destY=this._view.y+b.math.round(p*a.directionY,0);l=Math.max(b.math.round(l,0),1);e=Math.max(b.math.round(e,0),1);a.duration=e;a.speed=b.math.round(m,3);if(c&&!d||c&&d&&l>e){a.duration=l;a.speed=b.math.round(i,3)}},_handleTransitionEnd:function(){if(this._animated==true){this._animated=false;b.isSet(this._callbacks.stopSliding)&&b.call(this._callbacks.stopSliding,
{});var a=0;if(this._backToBounds())a=350;this._hideScrollbars(a)}},_backToBounds:function(){var a=this._getBoundsInfos(this._view.x,this._view.y);if(a.outsideOfBounds){var c=this._view.x,d=this._view.y;if(a.outsideOfBoundsX)c=a.positionOfBoundX;if(a.outsideOfBoundsY)d=a.positionOfBoundY;this._slideTo(c,d,{backToBound:true});return true}return false},_getBoundsInfos:function(a,c){var d={outsideOfBoundsX:false,outsideOfBoundsY:false,distanceToBoundX:0,distanceToBoundY:0};if(a>0||a<this._view.limitX){d.outsideOfBoundsX=
true;if(a>0){d.distanceToBoundX=Math.abs(a);d.directionX=1;d.positionOfBoundX=0}else{d.distanceToBoundX=Math.abs(a-this._view.limitX);d.directionX=-1;d.positionOfBoundX=this._view.limitX}}if(c>0||c<this._view.limitY){d.outsideOfBoundsY=true;if(c>0){d.distanceToBoundY=Math.abs(c);d.directionY=1;d.positionOfBoundY=0}else{d.distanceToBoundY=Math.abs(c-this._view.limitY);d.directionY=-1;d.positionOfBoundY=this._view.limitY}}d.outsideOfBounds=d.outsideOfBoundsX||d.outsideOfBoundsY;return d},_isAtPosition:function(a,
c){if(this._view.x==a&&this._view.y==c)return true;return false},_slideTo:function(a,c,d){var g=d&&d.duration?d.duration:0,f=d&&d.speed?d.speed:0;d=d&&d.backToBound?d.backToBound:false;this._transition.duration=g;if(g>=1){this._animated=true;b.isSet(this._callbacks.startSliding)&&b.call(this._callbacks.startSliding,{duration:g,speed:f})}else this._animated=false;g=g+"ms";f=this._transition.delay+"ms";var e=this._transition.func;if(d){g="350ms";e="cubic-bezier(0.3, 0.1, 1.0, 0.5)"}b.fx.applyTransformTransition(this._target,
g,f,e);if(this._view.scrollbars.active==true){this._view.scrollbars.x!=null&&this._view.scrollbars.x.applyTransition(g,f,e);this._view.scrollbars.y!=null&&this._view.scrollbars.y.applyTransition(g,f,e)}this._translateTo(a,c)},_getInstantPosition:function(){var a=b.fx.getTransformPosition(this._target);a.y+=this._view.shiftOriginY;return a},_translateTo:function(a,c){var d=this._view.x,g=this._view.y;if(b.isSet(a)&&this._scroll.canScrollX&&this._scroll.mustScrollX)d=a;if(b.isSet(c)&&this._scroll.canScrollY&&
this._scroll.mustScrollY)g=c;this._view.x=parseInt(d);this._view.y=parseInt(g);this._target.translate(this._view.x,this._view.y-this._view.shiftOriginY);if(this._view.scrollbars.active==true){this._view.scrollbars.x!=null&&this._view.scrollbars.x.updatePosition(this._view.x,this._view.y);this._view.scrollbars.y!=null&&this._view.scrollbars.y.updatePosition(this._view.x,this._view.y)}},_hideScrollbars:function(a){if(this._view.scrollbars.active==true){this._view.scrollbars.x!=null&&this._view.scrollbars.x.hide(a);
this._view.scrollbars.y!=null&&this._view.scrollbars.y.hide(a)}}};b.ui.layout.Scroller.Scrollbar=function(a){this.uId=b.getUId();this._properties=a;this._direction=null;this._backgroundColor="rgba(0, 0, 0, 0.55)";this._borderColor="rgba(0, 0, 0, 0.2)";this._opacityTransition=true;this._view={x:0,y:0,viewportSize:0,contentSize:0,size:0,width:0,ratioSize:0,ratioPosition:0,ratioBounce:0,borderSize:1,availableSpace:0,showed:true};this._transition={duration:"",delay:"",func:""};this._ctx=this._canvasNode=
this._domNode=null;this._firstHide=true;if(this._validateProperties()!==false){this._initProperties();this._initDom()}};b.ui.layout.Scroller.Scrollbar.prototype={_DEFAULT_WIDTH:5,getDomNode:function(){return this._domNode},updateSize:function(a,c){var d=0,g=0;this._view.viewportSize=a-this._view.borderSize*2;this._view.contentSize=c;if(a<c){this._view.ratioSize=this._view.viewportSize/this._view.contentSize;this._view.ratioSize*=0.11*(this._view.contentSize/this._view.viewportSize)+0.89}else this._view.ratioSize=
1;d=g=this._view.ratioSize*this._view.viewportSize;if(this._direction=="y")d=this._view.width;else g=this._view.width;this._resize(d,g);this._view.availableSpace=this._view.viewportSize-this._view.size;this._view.ratioPosition=this._view.availableSpace/(this._view.contentSize-this._view.viewportSize);this._view.ratioBounce=0.0010*this._view.contentSize+3},updatePosition:function(a,c){this._view.showed==false&&this.show();var d=0,g=0,f=this._view.availableSpace;if(this._direction=="y"){g=-c*this._view.ratioPosition;
if(g<0||g>f)g=g<0?Math.max(g+g*this._view.ratioBounce,-this._view.size+5):Math.min(g+(g-f)*this._view.ratioBounce,this._view.viewportSize-5)}else{d=-a*this._view.ratioPosition;if(d<0||d>f)d=d<0?Math.max(d+d*this._view.ratioBounce,-this._view.size+5):Math.min(d+(d-f)*this._view.ratioBounce,this._view.viewportSize-5)}this._translateTo(d,g)},show:function(){if(this._view.showed!=true){this._view.showed=true;b.fx.applyTransition(this._canvasNode,"opacity","0ms","0ms","default");this._canvasNode.style.opacity=
1}},hide:function(a){if(this._view.showed!=false){this._view.showed=false;if(this._opacityTransition==true){var c=300;if(b.isSet(a))c+=a;if(this._firstHide){this._firstHide=false;c+=600}c+="ms";b.fx.applyTransition(this._canvasNode,"opacity","200ms",c,"default")}this._canvasNode.style.opacity=0}},applyTransition:function(a,c,d){var g=false;if(g=(g=(g=g||a!=this._transition.duration)||c!=this._transition.delay)||d!=this._transition.func){this._transition.duration=a;this._transition.delay=c;this._transition.func=
d;b.fx.applyTransformTransition(this._domNode,a,c,d)}},_validateProperties:function(){return true},_raisePropertyError:function(a){b.log("[Scrollbar] Error: "+a+" missing or invalid")},_initProperties:function(){this._direction=this._properties.direction;this._view.width=this._DEFAULT_WIDTH;if(b.isSet(this._properties.width))this._view.width=this._properties.width;if(b.isSet(this._properties.borderColor))this._borderColor=this._properties.borderColor;if(b.isSet(this._properties.backgroundColor))this._backgroundColor=
this._properties.backgroundColor;if(b.isSet(this._properties.opacityTransition))this._opacityTransition=this._properties.opacityTransition},_initDom:function(){var a=this._domNode=document.createElement("div"),c=this._canvasNode=document.createElement("canvas");this._ctx=c.getContext("2d");a.appendChild(c);var d={position:"absolute","pointer-events":"none",opacity:1};if(this._direction=="y"){d.top="0px";d.right="1px"}else{d.bottom="2px";d.left="0px"}b.fx.apply(a,d);b.fx.apply(c,{position:"absolute"});
c.translate(0,0)},_drawbar:function(){var a=this._direction=="y",c=this._ctx,d=a?this._view.width/2:this._view.width/2+1,g=a?this._view.width/2+1:this._view.width/2,f=a?this._view.width:this._view.size-1,e=a?this._view.size-1:this._view.width,h=a?f/2:e/2;c.fillStyle=this._backgroundColor;c.strokeStyle=this._borderColor;c.lineWidth=this._view.borderSize;c.beginPath();if(a){c.arc(d,g,h,Math.PI,0,false);c.lineTo(d+h,e-h);c.arc(d,e-h,h,0,Math.PI,false);c.lineTo(d-h,g)}else{c.arc(d,g,h,Math.PI/2,3*Math.PI/
2,false);c.lineTo(f-h,g-h);c.arc(f-h,g,h,3*Math.PI/2,Math.PI/2,false);c.lineTo(d,g+h)}c.closePath();c.fill();c.stroke()},_resize:function(a,c){this._view.size=this._direction=="y"?c:a;var d=this._canvasNode;this._ctx.clearRect(0,0,d.width,d.height);b.fx.apply(this._domNode,{width:a+1+"px",height:c+"px"});d.width=a;d.height=c;this._drawbar()},_translateTo:function(a,c){this._view.x=a;this._view.y=c;this._domNode.translate(a,c)}};return b.ui.layout.Scroller});
define(["../../../../_amd/core"],function(b){b.ui.layout.SlidingPanels=function(a){this.uId=b.getUId();this.pages=null;this.transitionType="default";this.duration=800;this.HIGHER_INDEX=100;this.LOWER_INDEX=99;this._domNode=null;this._queue=[];this._pagesList=[];this._currentPage=this._firstPage=null;this._isSliding=false;b.mixin(this,a);if(this._validateProperties()!==false){this._initDom();this._initProperties()}};b.ui.layout.SlidingPanels.prototype={_TRANSITION_DEFAULT:"default",_TRANSITION_REVEAL:"reveal",
_TRANSITION_COVER:"cover",getDomNode:function(){return this._domNode},slideTo:function(a){if(!this._isSliding){var c=this._getQueueIndex(a);if(c!==false)c==this._queue.length-1?this.slideBack():this._silentSlideBack(a);else{c=this._firstPage;a=this._getPageById(a);var d=this.transitionType,g=this.duration,f=d==this._TRANSITION_REVEAL;d=d==this._TRANSITION_COVER;if(a!=null)this._slideStart({firstPage:c,currentPage:a,firstPageDuration:d?"":g,currentPageDuration:f?"":g,pageToListen:f?c:a,slideEndHandler:b.bind(this._onSlideEnd,
this,-1),firstPageTranslation:d?0:"-100%",firstPageZIndex:d?this.LOWER_INDEX:undefined,currentPageZIndex:d?this.HIGHER_INDEX:undefined})}}},slideBack:function(){if(!this._isSliding){var a=this._firstPage,c=this._queue.pop(),d=this.transitionType,g=this.duration,f=d==this._TRANSITION_REVEAL;this._slideStart({firstPage:a,currentPage:c,firstPageDuration:f?"":g,currentPageDuration:d==this._TRANSITION_COVER?"":g,pageToListen:f?c:a,slideEndHandler:b.bind(this._onSlideEnd,this,1),firstPageTranslation:f?
0:"100%",firstPageZIndex:f?this.LOWER_INDEX:undefined,currentPageZIndex:f?this.HIGHER_INDEX:undefined})}},_silentSlideBack:function(a){var c=this._getQueueIndex(a);a=this._queue.slice(c+1,this._queue.length);this._queue.splice(c+1,a.length);var d=a.length;for(c=0;c<d;c++){var g=a[c];g.setTranslateDuration(0);g.translate("100%");g.setPosition(1);this.transitionType!=this._TRANSITION_DEFAULT&&g.setZIndex(this.LOWER_INDEX)}this._firstPage=this._currentPage;this.slideBack()},_slideStart:function(a){this._isSliding=
true;b.publish("/slidingpanels/events/slidestart",{id:a.currentPage.id});this._currentPage=a.currentPage;a.firstPageZIndex&&a.firstPage.setZIndex(this.LOWER_INDEX);a.currentPageZIndex&&a.currentPage.setZIndex(this.HIGHER_INDEX);a.currentPage.display();a.firstPage.setTranslateDuration(a.firstPageDuration);a.currentPage.setTranslateDuration(a.currentPageDuration);b.fx.onTransitionEnd(a.pageToListen.getDomNode(),a.slideEndHandler);a.firstPage.translate(a.firstPageTranslation,0);a.currentPage.translate(0)},
_onSlideEnd:function(a){var c=this._firstPage,d=this._currentPage;if(this.transitionType!=this._TRANSITION_DEFAULT){c.setZIndex(this.LOWER_INDEX);d.setZIndex(this.HIGHER_INDEX)}c.setPosition(a);d.setPosition(0);a==-1&&this._queue.push(c);this._firstPage=this._currentPage;this._isSliding=false;b.publish("/slidingpanels/events/slideend",{id:d.id})},_getPageById:function(a){var c,d=this._pagesList,g=d.length;for(c=0;c<g;c++){var f=d[c];if(f.id==a&&f.position==1)return f}return null},_getQueueIndex:function(a){var c,
d=this._queue,g=d.length;for(c=0;c<g;c++)if(d[c].id==a)return c;return false},_validateProperties:function(){return true},_initProperties:function(){var a=this.transitionType,c,d=this.pages,g=d.length;for(c=0;c<g;c++){var f=new b.ui.layout.SlidingPanels.Page({node:$(d[c])});if(c==0){f.translate(0);f.setPosition(0);this._firstPage=f}else{var e="100%";if(a==this._TRANSITION_REVEAL)e=0;f.translate(e);f.setPosition(1)}if(a!=this._TRANSITION_DEFAULT)c==0?f.setZIndex(this.HIGHER_INDEX):f.setZIndex(this.LOWER_INDEX);
e=f.getDomNode();e.parentNode.removeChild(e);this._domNode.appendChild(e);this._pagesList.push(f)}if(b.isInteger(this.duration))this.duration+="ms"},_initDom:function(){this._domNode=document.createElement("div");b.addClass(this._domNode,"sl_container")}};b.ui.layout.SlidingPanels.Page=function(a){this.uId=b.getUId();this.id=null;this.position=0;this._properties=a;this._domNode=null;this._toDefer=this._isDisplayed=false;this._initProperties();this._initDom()};b.ui.layout.SlidingPanels.Page.prototype=
{wkArOldIOS:b.ua.isIOS&&b.ua.osVersion<=2,getDomNode:function(){return this._domNode},setPosition:function(a){this.position=a;if(this.position!=0){if(!this.wkArOldIOS){this._domNode.style.display="none";this._isDisplayed=false}}else b.fx.apply(this._domNode,{transform:"none"})},display:function(){this._domNode.style.display="block";if(this._isDisplayed==false)this._toDefer=this._isDisplayed=true},translate:function(a){var c,d={defered:b.bind(function(){c&&clearTimeout(c);this._domNode.translate(a,
null)},this)};if(this._toDefer){c=b.setTimeout(d,"defered",0);this._toDefer=false}else d.defered()},setZIndex:function(a){this._domNode.style.zIndex=a},setTranslateDuration:function(a){b.fx.applyTransformTransition(this._domNode,a,"1ms","default")},_initDom:function(){b.addClass(this._domNode,"sl_page")},_initProperties:function(){this._domNode=this._properties.node;this.id=this._domNode.id}};return b.ui.layout.SlidingPanels});
define(["../../../../_amd/core","../../../../math/_geometric/js/geometric"],function(b){b.ui.xy.CSpinner=function(e){this.uId=b.getUId();this._domNode=null;b.mixin(this,e);if(this._validateProperties()!==false){this._initProperties();this._initDom()}};b.ui.xy.CSpinner.prototype={getDomNode:function(){return this._domNode},toggle:function(){this._timer?this._stopRendering():this._startRendering()},_startRendering:function(){if(!this._timer)this._timer=b.setInterval(this,"_render",this.refreshRate)},
_stopRendering:function(){clearInterval(this._timer);this._timer=null},_render:function(){this._ctx.clearRect(0,0,this.size,this.size);var e=this._ctx,h=this._cx,i=this._cy,m=this._r1,p=this._r2,l=this.count,n=this.space,j=this.linewidth,k=this._grdcolors,o=this.linecolor,q,s,r=(360-n*l)/l,t=0;q=0;for(s=l-this._position-1;q<l;q++){s=(s+1)%l;var u=e,w=h,B=i,C=m,E=p,x=t,y=t+r,z=j,D=k[s],A=o;u.beginPath();var v=d(w,B,C,x);u.moveTo(v.x,v.y);v=void 0;v=y>x?false:true;u.arc(w,B,C,c(x-90),c(y-90),v);v=d(w,
B,E,y);u.lineTo(v.x,v.y);v=void 0;v=x>y?false:true;u.arc(w,B,E,c(y-90),c(x-90),v);v=d(w,B,C,x);u.lineTo(v.x,v.y);u.closePath();d(w,B,C,x+Math.abs(y-x)/2);d(w,B,E,x+Math.abs(y-x)/2);u.fillStyle=D;u.fill();if(z>0){u.lineWidth=z;u.strokeStyle=A||"transparent";u.stroke()}t+=r+n}this._position=(this._position+1)%this.count},_validateProperties:function(){return true},_initDom:function(){var e=this._domNode=document.createElement("canvas");e.translate(0,0);this._ctx=e.getContext("2d");e.width=this.size;
e.height=this.size;this._render();this._startRendering()},_initProperties:function(){var e=this,h=function(i,m){if(e[i]!==0)e[i]=e[i]||m};h("size",25);h("fromcolor","#ccc");h("tocolor","#000");h("stopcolor",0.4);h("linecolor",null);h("radius",7);h("thickness",5);h("count",Math.floor(e.radius*1.5));h("space",10);h("linewidth",1);h("refreshRate",40);e._cx=e.size/2;e._cy=e.size/2;e._r1=e.radius;e._r2=e._r1+e.thickness;e._timer=null;e._grdcolors=g(e.fromcolor,e.tocolor,e.stopcolor,e.count);e._position=
0}};var a=b.math.round,c=b.math.degToRad,d=function(e,h,i,m){return{x:e+i*Math.cos(c(m-90)),y:h+i*Math.sin(c(m-90))}},g=function(e,h,i,m){e=f(e)||{r:0,g:0,b:0,a:1};h=f(h)||{r:255,g:255,b:255,a:1};var p=[],l,n,j=1,k=1/m,o=0;for(n=l=0;l<m;l++,n+=k){var q={r:e.r*j+(1-j)*h.r,g:e.g*j+(1-j)*h.g,b:e.b*j+(1-j)*h.b,a:e.a*j+(1-j)*h.a};p.push("rgba("+a(q.r,0)+","+a(q.g,0)+","+a(q.b,0)+","+a(q.a,2)+")");if(o==0&&n>=i)o=1/(m-l);j-=o;if(l==m-2)j=0}return p},f=function(e){var h=null,i=null;if(!h)if(h=/^#?([a-fA-F0-9]{1,2})([a-fA-F0-9]{1,2})([a-fA-F0-9]{1,2})$/.exec(e)){for(i=
1;i<4;i++)h[i]=h[i].length==1?h[i]+h[i]:h[i];i={r:parseInt(h[1],16),g:parseInt(h[2],16),b:parseInt(h[3],16),a:1}}if(!h)if(h=/[^0-9]*([0-9\.]+)[^0-9]*([0-9\.]+)[^0-9]*([0-9\.]+)[^0-9]*([0-9\.]+)?/.exec(e))i={r:h[1],g:h[2],b:h[3],a:h[4]||1};return i};return b.ui.xy.CSpinner});
